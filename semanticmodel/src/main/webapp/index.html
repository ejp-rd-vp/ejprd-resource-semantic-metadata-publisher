<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>EUROPEAN JOINT PROGRAMME ON RARE DISEASES - Index</title>
    <meta content="" name="description">
    <meta content="" name="keywords">

    <!-- Favicons -->
    <link href="assets/img/favicon.png" rel="icon">
    <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i"
          rel="stylesheet">
    <!-- Vendor CSS Files -->
    <link href="assets/vendor/animate.css/animate.min.css" rel="stylesheet">
    <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Template Main CSS File -->
    <link href="assets/css/style.css" rel="stylesheet">
</head>
<body>
<!-- ======= Header ======= -->
<header id="header" class="fixed-top">
    <div class="container d-flex align-items-center">
        <h1 class="logo me-auto"><a href="../webapp/index.html">EJPRD Resources Metadata Model</a></h1>
        <a href="index.html" class="logo me-auto"><em src="assets/img/hero-bg.jpg" class="img-fluid"></em></a>
        <nav class="nav-menu d-none d-lg-block">
            <ul>
                <li class="active"><a href="index.html">Home</a></li>
                <li class="active"><a href="about.html">About</a></li>
                <li><a href="active"><a href="contact.html">Contact</a></a></li>
            </ul>
        </nav>
        <a href="#checkMetadata" class="appointment-btn scrollto">Check your Metadata </a>
    </div>
</header>
<!-- End Header -->

<!-- ======= Hero Section ======= -->
<section id="hero" class="d-flex align-items-center">
    <div class="container">
        <h1>Welcome to EJPRD Resource Metadata model</h1>
        <br>
        <a href="#fileUpload" class="btn-get-started scrollto">Get Started</a>
    </div>
</section>
<!-- End Hero -->

<main id="main">
    <!-- ======= Why Us Section ======= -->
    <section id="why-us" class="why-us">
        <div class="container">
            <div class="row">
                <div class="col-lg-4 d-flex align-items-stretch">
                    <div class="content">
                        <h3>Introduction</h3>
                        <p>
                            This repository describes and contains semantic data model implementations of the semantic
                            metadata model for the EJPRD-VP resources for rare disease artifacts.
                        <p>It is part of the European Joint Programme (EJP) for Rare Disease, we developed standards for
                            rare disease resources to describe their metadata that will improve the FAIR-ness of these
                            resources.</p>
                        <p>EJPRD Resources Dataset Metadata Standard lies at the heart of the EJPRD virtual platform;
                            providing rare diseases resources data suppliers, with the information required to make rare
                            diseases resources discoverable, exploit and curate their data in an efficient and effective
                            way possible.</p>
                        <div class="text-center">
                            <a id="checkMetadata" class="more-btn">Learn More<em class="bx bx-chevron-right"></em></a>
                        </div>
                    </div>
                </div>
                <div class="col-lg-8 d-flex align-items-stretch">
                    <div class="icon-boxes d-flex flex-column justify-content-center">
                        <div class="row">
                            <div class="col-xl-4 d-flex align-items-stretch">
                                <div class="icon-box mt-4 mt-xl-0">
                                    <em class="bx bx-receipt"></em>
                                    <h4>Convert resource metadata to RDF</h4>
                                    <p>In other to verify if your resources metadata is compatible with the EJPRD
                                        metadata model please click on the link below </p>
                                    <a href="#about" class="more-btn">Learn More<em class="bx bx-chevron-right"></em></a>
                                </div>
                            </div>

                            <div class="col-xl-4 d-flex align-items-stretch">
                                <div class="icon-box mt-4 mt-xl-0">
                                    <em class="bx bx-cube-alt"></em>
                                    <h4>Validate resources metadata</h4>
                                    <p>In other to validate your resource metadata in RDF format click below </p>
                                    <a href="##about2" class="more-btn">Learn More<em class="bx bx-chevron-right"></em></a>
                                </div>
                            </div>
                            <div class="col-xl-4 d-flex align-items-stretch">
                                <div class="icon-box mt-4 mt-xl-0">
                                    <em class="bx bx-cube-alt"></em>
                                    <h4>Published EJPRD Metadata Model</h4>
                                    <p>The EJPRD Resource metadata model in complaint with the <em>FAIRness</em>
                                        principles. For details on the metadata model </p>
                                    <a href="##about2" class="more-btn">Learn More<em class="bx bx-chevron-right"></em></a>
                                </div>
                            </div>
                        </div>
                    </div><!-- End .content-->
                </div>
            </div>

        </div>

    </section><!-- End Why Us Section -->
    <!-- ======= About Section ======= -->

    <!-- End About Section -->

    <!-- ======= Counts Section ======= -->
    <section id="counts" class="counts">
        <div class="container">
            <section id="about" class="about">
                <div class="container-fluid">
                  <div>
                     <h4>Steps to upload and convert your metadata</h4>
                     <p>In order to upload your files in JSON format click on browse button and select the file you want to validate in JSON format.  </p>
                    </div>
                    <div class="tabset">
                        <!-- Tab 1 -->
                        <input type="radio" name="tabset" id="tab1" aria-controls="marzen" checked>
                        <label for="tab1">Convert your JSON File</label>
                        <!-- Tab 2 -->
                        <input type="radio" name="tabset" id="tab2" aria-controls="rauchbier">
                        <label for="tab2">Convert your RDF File</label>
                        <div class="tab-panels" style="border:1px solid #CCC; padding:0 25px 0 25px">
                            <section id="marzen" class="tab-panel">
                                <input type="file" id="fileUpload" name="fileToUpload" accept=".json"/>
                                <br/><br/>
                                <select name="mappingFile" id="optionButton">
                                    <option value="Catalog">Mapping for Catalog</option>
                                    <option value="Distribution">Mapping for Distribution</option>
                                    <option value="Dataset">Mapping for Dataset</option>
                                    <option value="DataService">Mapping for DataService</option>
                                    <option value="Location">Mapping for Location</option>
                                    <option value="Person">Mapping for Person</option>
                                    <option value="Organisation">Mapping for Organisation</option>
                                    <option value="Resources">Mapping for Resources</option>
                                </select>
                                <button id="submitButton">Submit</button>
                                <br>
                                <br>
                                <div class="row">
                                    <div class="mb-3">
                                        <label for="convert" class="form-label">Uploaded JSON</label>
                                        <textarea class="form-control" id="convert" rows="3"></textarea>
                                    </div>
                                    <br>
                                    <br>
                                    <div class="mb-3">
                                        <label for="convertedfile" class="form-label">Converted Json or chosen file in RDF format</label>
                                        <textarea class="form-control" id="convertedfile" rows="3"></textarea>
                                    </div>
                                </div>

                                <div class="container">
                                    <section id="validate" class="about">
                                        <div class="container-fluid">
                                            <input type="file" id="validator" name="fileToUpload"/>
                                            <select name="frameFile" id="frameoptionButton">
                                                <option value="framesFiles/catalogFrame.json">Catalog frame file</option>
                                                <option value="framesFiles/dataserviceFrame.json">Dataservice frame file </option>
                                                <option value="framesFiles/datasetFrame.json">Dataset Frame file</option>
                                                <option value="framesFiles/distributionFrame.json">Distribution Frame file</option>
                                                <option value="framesFiles/locationFrame.json">Location frame file </option>
                                                <option value="framesFiles/organisationFrame.json">Organisation frame file</option>
                                                <option value="framesFiles/persongFrame.json">Person frame file</option>
                                                <option value="framesFiles/resourcesFrame.json">Resources frame file</option>
                                            </select>
                                            <button id="validateButton">Validates</button>
                                        </div>
                                        <div class="row">
                                            <div class="mb-3">
                                                <label for="validatedFile1" class="form-label">Data in JSON-LD Format</label>
                                                <textarea class="form-control" id="validatedfile1" rows="3"></textarea>
                                            </div>
                                        </div>
                                        <div class="mb-3">
                                            <label for="validatedFile" class="form-label">ShEx Report</label>
                                            <textarea class="form-control" id="validatedFile" rows="3"></textarea>
                                        </div>
                                    </section>
                                </div>
                            </section>


                            <section id="rauchbier" class="tab-panel">

                                <input type="file" id="fileUpload2" name="fileToUpload2" accept=".ttl,.n3"/>
                                <br/><br/>
                                <button id="submitButton2">Submit</button>
                                <br>
                                <br>
                                <div class="row">
                                   <div class="mb-3">
                                        <label for="convertedfile2" class="form-label">Your file in RDF format</label>
                                        <textarea class="form-control" id="convertedfile2" rows="3"></textarea>
                                    </div>
                                </div>

                                <div class="container">
                                    <section id="validate2" class="about">
                                         <div class="row">
                                            <div class="mb-3">
                                                <label for="validatedFile1" class="form-label">Data in JSON-LD Format</label>
                                                <textarea class="form-control" id="validatedfile12" rows="3"></textarea>
                                            </div>
                                        </div>
                                        <div class="mb-3">
                                            <label for="validatedFile" class="form-label">ShEx Report</label>
                                            <textarea class="form-control" id="validatedFile2" rows="3"></textarea>
                                        </div>
                                    </section>
                                </div>




                            </section>

                        </div>

                    </div>
               </div>
                <br>
                <br>
            </section><!-- End Counts Section -->
        </div>

    </section>
</main>
<!-- End #main -->

<!-- ======= Footer ======= -->
<footer id="footer">
    <div class="container d-md-flex py-4">
        <div class="me-md-auto text-center text-md-start">
            <div class="copyright">
                &copy; Copyright <strong><span>EJP Rare Diseases </span></strong>. All Rights Reserved
            </div>
            <div class="credits">
                Designed by <a href="https://bootstrapmade.com/">BootstrapMade</a>
            </div>
        </div>
        <div class="social-links text-center text-md-right pt-3 pt-md-0">
            <a href="#" class="twitter"><em class="bx bxl-twitter"></em></a>
        </div>
    </div>
</footer><!-- End Footer -->

<div id="preloader"></div>
<a href="#" class="back-to-top"><em class="icofont-simple-up"></em></a>

<!-- Vendor JS Files -->
<script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="assets/vendor/glightbox/js/glightbox.min.js"></script>
<script src="assets/vendor/php-email-form/validate.js"></script>
<script src="assets/vendor/purecounter/purecounter.js"></script>
<script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
<!-- Template Main JS File -->
<script src="assets/js/main.js"></script>

<script>
    document.querySelector('#submitButton').addEventListener('click', () => {
        analysisButtonAction()
    })

    document.querySelector('#submitButton2').addEventListener('click', () => {
        ttlButtonAction()
    })

    function ttlButtonAction() {
        const URI = "/semanticmodel/semerd";
        const formData = new FormData();
        const fileField = document.querySelector('#fileUpload2');
        formData.append('multipartFile', fileField.files[0]);
        let httpRequest = HttpRequestEngine.fileUploadRequest(URI, formData, 'POST');
        HttpRequestEngine.fetchRequest(httpRequest).then((data) => {
            console.log(data);
            document.querySelector('#convertedfile2').value = data.outputFileInTTl;
            document.querySelector('#validatedfile12').value = data.userJsonLDFile;
            document.querySelector('#validatedFile2').value = data.sheVal;
        });
    }

    function analysisButtonAction() {
        const URI = "/semanticmodel/semerd";
        const formData = new FormData();
        const fileField = document.querySelector('#fileUpload');
        let data = document.querySelector('#optionButton').value;
        formData.append('multipartFile', fileField.files[0]);
        formData.append('mappingFile', data)
        let httpRequest = HttpRequestEngine.fileUploadRequest(URI, formData, 'POST');
        HttpRequestEngine.fetchRequest(httpRequest).then((data) => {
            console.log(data);
            document.querySelector('#convert').value = data.inputFile
            document.querySelector('#convertedfile').value = data.outputFileInTTl;
            document.querySelector('#validatedfile1').value = data.userJsonLDFile;
            document.querySelector('#validatedFile').value = data.sheVal;
        });
    }

    class HttpRequestEngine {
        static fetchRequest(request) {
            return fetch(request)
                .then((res) => {
                    if (res.ok) {
                        return res.json();
                    }
                    throw new Error('Something went wrong');
                })
                .then((data) => data)
                .catch(error => {
                    alert(error);
                });
        }

        static fileUploadRequest(uri, dataObj, httpMethod) {

            let httpHeaders = new Headers();
            httpHeaders.append('Accept', 'application/json');
            return new Request(uri, {
                method: httpMethod,
                withCredentials: true,
                headers: httpHeaders,
                body: dataObj
            });
        }
    }
</script>
</body>
</html>
