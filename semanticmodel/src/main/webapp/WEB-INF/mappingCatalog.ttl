@prefix rml:       <http://semweb.mmlab.be/ns/rml#> .
@prefix rr:        <http://www.w3.org/ns/r2rml#> .
@prefix ql:        <http://semweb.mmlab.be/ns/ql#> .
@prefix rdf:       <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix :          <http://example.org/rules/> .
@prefix schema:    <http://schema.org/> .
@prefix afrl:      <http://purl.allotrope.org/ontologies/rol#> .
@prefix sio:       <http://semanticscience.org/resource/> .
@prefix foaf:      <http://xmlns.com/foaf/0.1/> .
@prefix iao:       <http://purl.obolibrary.org/obo/> .
@prefix ex:        <http://ex.com/>.
@prefix rr:        <http://www.w3.org/ns/r2rml#>.
@prefix rml:       <http://semweb.mmlab.be/ns/rml#>.
@prefix ql:        <http://semweb.mmlab.be/ns/ql#>.
@prefix xsd:       <http://www.w3.org/2001/XMLSchema#>.
@prefix schema:    <http://schema.org/>.
@prefix wgs84_pos: <http://www.w3.org/2003/01/geo/wgs84_pos#lat>.
@prefix gn:        <http://www.geonames.org/ontology#>.
@prefix rr:        <http://www.w3.org/ns/r2rml#>.
@prefix rml:       <http://semweb.mmlab.be/ns/rml#>.
@prefix ql:        <http://semweb.mmlab.be/ns/ql#>.
@prefix xsd:       <http://www.w3.org/2001/XMLSchema#>.
@prefix schema:    <http://schema.org/>.
@prefix wgs84_pos: <http://www.w3.org/2003/01/geo/wgs84_pos#lat>.
@prefix gn:        <http://www.geonames.org/ontology#>.
@prefix dcat:      <http://www.w3.org/ns/dcat#> .
@prefix ejp:       <http://purl.org/ejp-rd/vocabulary/> .
@prefix obo:       <http://purl.obolibrary.org/obo/> .
@base <http://example.com/ns#>.

<#CatalogMapping>
    a                     rr:TriplesMap ;
    rml:logicalSource     [ rml:source               "A" ;
                                rml:referenceFormulation ql:JSONPath ;
                                rml:iterator             "$" ] ;
    rr:subjectMap         [ rr:template "http://ex.com/{Catalog.id}" ;
                            rr:class    dcat:Catalog ] ;

    rr:predicateObjectMap [ rr:predicate ex:accessRight ;
                            rr:objectMap [ rml:reference "Catalog.catalog" ] ] ;

    rr:predicateObjectMap [ rr:predicate dcat:dataset ;
                                rr:objectMap [ rr:parentTriplesMap <#DatasetMapping> ] ] ;

    rr:predicateObjectMap [ rr:predicate dcat:service ;
                                rr:objectMap [ rr:parentTriplesMap <#DataserviceMapping> ] ] .

#    rr:predicateObjectMap [ rr:predicate dcat:themesTaxonomy ;
#                                rr:objectMap [ rr:parentTriplesMap <#ConceptSchemeMapping> ] ] ;
#
#    rr:predicateObjectMap [ rr:predicate dcat:hasPart ;
#                                rr:objectMap [ rr:parentTriplesMap <#ResourceMapping> ] ] ;
#
#    rr:predicateObjectMap [ rr:predicate ex:publisher ;
#                                rr:objectMap [ rr:parentTriplesMap <#PublisherMapping> ] ];
#
#    rr:predicateObjectMap [ rr:predicate foaf:Homepage ;
#        rr:objectMap          [ rml:reference "Catalog.homepage" ] ] .


<#DatasetMapping>
    a                     rr:TriplesMap ;
    rml:logicalSource     [ rml:source               "A" ;
                            rml:referenceFormulation ql:JSONPath ;
                            rml:iterator             "$" ] ;
    rr:subjectMap         [ rr:template "http://ex.com/{Catalog.dataset.id}" ;
                            rr:class    dcat:Dataset ] ;

    rr:predicateObjectMap [ rr:predicate foaf:type ;
                            rr:objectMap [ rml:reference "Catalog.dataset.type.enum" ] ];

    rr:predicateObjectMap [ rr:predicate foaf:wasGeneratedBy ;
                            rr:objectMap [ rml:reference "Catalog.dataset.wasGeneratedBy" ] ];

    rr:predicateObjectMap [ rr:predicate foaf:distribution ;
                            rr:objectMap [ rml:reference "Catalog.dataset.distribution" ] ];

    rr:predicateObjectMap [ rr:predicate ex:Spatial ;
                            rr:objectMap [ rr:parentTriplesMap <#LocationMapping> ] ].

<#LocationMapping>
    a                     rr:TriplesMap ;
    rml:logicalSource     [ rml:source               "A" ;
                            rml:referenceFormulation ql:JSONPath ;
                            rml:iterator             "$" ] ;
    rr:subjectMap         [ rr:template "http://ex.com/{Catalog.dataset.spatial.location.id}" ;
                            rr:class    ejp:Location ] ;
    rr:predicateObjectMap [ rr:predicate obo:streetAddress ;
                            rr:objectMap [ rml:reference "Catalog.dataset.spatial.location.streetAddress" ] ] ;
    rr:predicateObjectMap [ rr:predicate obo:city ;
                            rr:objectMap [ rml:reference "Catalog.dataset.spatial.location.city" ] ] ;
    rr:predicateObjectMap [ rr:predicate sio:country ;
                            rr:objectMap [ rml:reference "Catalog.dataset.spatial.location.country" ] ] ;
    rr:predicateObjectMap [ rr:predicate dcat:continent ;
                            rr:objectMap
                                         [ rml:reference
                                                   "Catalog.dataset.spatial.location.continent" ] ] ;

    rr:predicateObjectMap [ rr:predicate foaf:OrgAddress ;
                            rr:objectMap [ rml:reference "Catalog.dataset.spatial.location.region.enum" ] ] .



